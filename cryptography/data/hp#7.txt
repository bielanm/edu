Following Dumbledore's death, Voldemort consolidates his support and power, including covert control of the Ministry of Magic, while Harry is about to turn seventeen, losing the protection of his home. The Order of the Phoenix move Harry to a new location before his birthday, but are attacked upon departure. In the ensuing battle, "Mad-Eye" Moody is killed and George Weasley wounded; Voldemort himself arrives to kill Harry, but Harry's wand fends him off of its own accord. Harry, Ron and Hermione make preparations to abandon Hogwarts and hunt down Voldemort's four remaining Horcruxes, but have few clues to work with as to their identities and locations. One is a locket once owned by Hogwarts' co-founder Salazar Slytherin which was stolen by the mysterious "R.A.B.", one is possibly a cup originally belonging to co-founder Helga Hufflepuff, a third might be connected to co-founder Rowena Ravenclaw, and the fourth might be Nagini, Voldemort's snake familiar. They also inherit strange bequests from among Dumbledore's possessions: a Golden Snitch for Harry, a Deluminator for Ron, and a book of fairy tales for Hermione.

The trio attends Bill Weasley's wedding, but during the reception the Ministry of Magic finally falls to Voldemort and the wedding is attacked by Death Eaters. They flee to 12 Grimmauld Place in London, the family home of Sirius Black, that Harry had inherited a year before. Thanks to the house-elf Kreacher they identify R.A.B. as Sirius' deceased brother Regulus and learn that Slytherin's locket was stolen from the house and ultimately seized by Dolores Umbridge of the Ministry of Magic. They infiltrate the Ministry in disguise and take back the locket, but accidentally break the protection of 12 Grimmauld Place during their escape and must go on the run across the countryside. With no way to destroy the locket, they argue frequently under the object's evil influence, culminating in Ron abandoning Harry and Hermione.

Harry and Hermione continue the quest, discovering more about Dumbledore's past, including the death of Dumbledore's younger sister and his connection to the dark wizard Gellert Grindelwald. They travel to Godric's Hollow, Harry's birthplace and the place where his parents died, and meet the elderly magical historian Bathilda Bagshot, but she turns out to be Nagini in disguise, awaiting their arrival. The snake attacks Harry and again they barely escape, but Harry's wand is damaged beyond repair. Their luck finally appears to turn in the Forest of Dean. A mysterious silver doe Patronus appears and guides Harry to an icy pond containing the Sword of Hogwarts co-founder Godric Gryffindor, one of the few objects able to destroy Horcruxes. During Harry's attempt to recover the sword, the Horcrux tries to kill him. He is saved by Ron, who appears suddenly, takes the sword and uses it to destroy the locket.

Ron had been guided back to them by the Deluminator, indicating that Dumbledore's gifts may be more useful than they thought. Hermione identifies in Dumbledore's book a strange symbol also worn at the wedding by Xenophilius Lovegood. They visit him and are told the symbol represents the mythical Deathly Hallows, three objects from an old fairy tale titled The Tale of the Three Brothers: the Elder Wand, an unbeatable wand; the Resurrection Stone, able to summon the dead; and an infallible Invisibility Cloak. Although Ron and Hermione are skeptical, Harry believes the Hallows are real and could explain the visions of Voldemort he has been having over the past few months. He suspects Voldemort is hunting the Elder Wand, won by Dumbledore after defeating Grindelwald, believing it will allow him to overpower the connection between his own wand and Harry's. Harry believes the Resurrection Stone was inset into the ring horcrux that Dumbledore discovered the previous year, and may be hidden inside the Snitch Dumbledore left for him, but he can't open it. The description of the third Hallow also matches that of his own inherited Invisibility Cloak. Harry's suspicions are confirmed when he has a vision of Voldemort breaking open Dumbledore's tomb and stealing the Elder Wand from within.

The trio are captured by Snatchers and taken to Malfoy Manor, where Bellatrix Lestrange tortures Hermione to learn how the three acquired the sword, which she had believed was in her vault at Gringotts. With the help of Dobby the house-elf they escape along with fellow prisoners Luna Lovegood, Mr. Ollivander, Dean Thomas, and the goblin Griphook. During the escape, Peter Pettigrew is strangled by his own silver hand after Harry reminds him of the debt he owes him; Harry overpowers Draco Malfoy and steals his wand; and Dobby is killed by Bellatrix. Bellatrix's anger in interrogating Hermione suggests to Harry some exceptional object is in her vault, and when questioned, Griphook confirms a gold cup is indeed in her vault. With Griphook's help, they break into the vault at Gringotts, retrieve the cup, and escape on a dragon, but in the chaos Griphook steals the Sword of Gryffindor from them. Harry has another vision of Voldemort and sees that he now understands their plan, and intends to make his remaining horcruxes even safer. The vision also confirms the unidentified horcrux is at Hogwarts.

They enter the school through an undiscovered secret entrance in the Hog's Head, a bar in Hogsmeade owned by Dumbledore's brother, Aberforth. Harry alerts the teachers Voldemort is planning an assault on the school, and they drive out Snape and summon the Order of the Phoenix to help defend the school to win time for Harry to locate the horcrux. Voldemort had set a guard in the Ravenclaw tower, corroborating Harry's belief the horcrux is Rowena Ravenclaw's diadem, lost centuries ago. The Ravenclaw ghost's story further confirms this belief, and Harry remembers an old diadem in the Room of Requirement. Ron and Hermione destroy the cup with basilisk fangs taken from the Chamber of Secrets as Voldemort and his army besiege the castle. They find the diadem but are ambushed by Draco Malfoy and his friends Crabbe and Goyle. Crabbe tries to kill them using Fiendfyre, a cursed fire, but is unable to control it; the fire destroys the diadem and himself while Harry and his friends save Malfoy and Goyle. Meanwhile, several major characters are killed in the Battle of Hogwarts, including Remus Lupin, Nymphadora Tonks, and Fred Weasley.

In his encampment, Voldemort feels the Elder Wand is not performing as he expected. According to legend, its full allegiance must be won by killing the previous owner, and Voldemort reasons that as Snape killed Dumbledore, he will not be able to fully wield the wand's power until he kills Snape, which he does. Harry arrives as Snape is dying, and Snape passes him memories to view in a pensieve. They reveal Snape had a lifelong love for Harry's mother and felt haunted for causing her death, and despite hating Harry's father he agreed at Dumbledore's request to watch over Harry and act as a double agent against Voldemort. The doe Patronus that led Harry to the Sword was summoned by Snape, who was watching over them the whole time. It is revealed that Dumbledore was slowly dying after mishandling the ring horcrux, and he planned his "murder" with Snape in advance to prove Snape's allegiance to Voldemort. The memories also explain that Harry himself is a horcrux and must die at Voldemort's hand if Voldemort is to become mortal. Harry accepts his death and goes to the Forbidden Forest to allow Voldemort to kill him. On the way he mentions to Neville Longbottom that Voldemort's snake Nagini must be killed to make Voldemort vulnerable. He finally manages to open the Snitch and uses the Resurrection Stone within to seek comfort and courage from his dead loved ones—his parents, Sirius and Lupin—dropping the Stone in the forest before reaching Voldemort's camp. Voldemort uses the Killing Curse and Harry does not defend himself.

Harry awakens in a dreamlike location resembling Kings Cross station and is greeted by Dumbledore, who explains that Voldemort's original Killing Curse left a fragment of Voldemort's soul in Harry, which caused the connection they had felt, making Harry an unintended Horcrux; this fragment had just been destroyed by Voldemort himself. When Voldemort used Harry's blood to regain his full strength, this further protected Harry from Voldemort, allowing Harry to return to life if he chooses, or to "go on." Harry chooses to return and feigns death. Voldemort calls a truce and displays Harry's body, offering to spare most of the defenders if they surrender. Neville, however, pulls the Sword of Gryffindor out of the Sorting Hat and uses it to behead Nagini, leaving Voldemort unprotected, and Harry escapes under his cloak as the battle resumes.

In a final onslaught, Bellatrix is killed by Molly Weasley and Harry reveals to Voldemort that he is alive. He explains to Voldemort the Elder Wand's loyalty transfers upon the defeat, not necessarily the killing, of its previous master. Although Voldemort believes by killing Snape he has gained the Wand's loyalty, Snape was in fact never its master. Instead, Draco Malfoy inadvertently earned the Wand's loyalty when he disarmed Dumbledore just before Snape arrived to kill him. Therefore, Harry believes that their duel will depend on whether or not the Wand recognises Harry to be its new master after he disarmed Draco at Malfoy Manor weeks prior. Voldemort attempts one final Killing Curse on Harry, but the Elder Wand refuses to act against Harry and the spell rebounds, killing Voldemort at last.

Harry uses the Elder Wand to repair his original wand, planning to return the Elder Wand to Dumbledore's tomb where its power may vanish if Harry dies undefeated and it can drop out of history. Harry does not intend to search for the Resurrection Stone he dropped in the Forbidden Forest, but will keep the Invisibility Cloak he inherited. The wizarding world returns to peace once more.